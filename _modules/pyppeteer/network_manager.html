
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>pyppeteer.network_manager &#8212; Pyppeteer 0.0.19 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
  <!-- font -->
  <link href='https://fonts.googleapis.com/css?family=Raleway:500' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,400italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Noto+Serif:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
  <!-- Style -->
  
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />


  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for pyppeteer.network_manager</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python3</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="sd">&quot;&quot;&quot;Network Manager module.&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="k">import</span> <span class="n">OrderedDict</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="k">import</span> <span class="n">unquote</span>
<span class="kn">from</span> <span class="nn">types</span> <span class="k">import</span> <span class="n">SimpleNamespace</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="k">import</span> <span class="n">Awaitable</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Union</span><span class="p">,</span> <span class="n">TYPE_CHECKING</span>

<span class="kn">from</span> <span class="nn">pyee</span> <span class="k">import</span> <span class="n">EventEmitter</span>

<span class="kn">from</span> <span class="nn">pyppeteer.connection</span> <span class="k">import</span> <span class="n">CDPSession</span>
<span class="kn">from</span> <span class="nn">pyppeteer.errors</span> <span class="k">import</span> <span class="n">NetworkError</span>
<span class="kn">from</span> <span class="nn">pyppeteer.frame_manager</span> <span class="k">import</span> <span class="n">FrameManager</span><span class="p">,</span> <span class="n">Frame</span>
<span class="kn">from</span> <span class="nn">pyppeteer.multimap</span> <span class="k">import</span> <span class="n">Multimap</span>

<span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">typing</span> <span class="k">import</span> <span class="n">Set</span>  <span class="c1"># noqa: F401</span>


<span class="k">class</span> <span class="nc">NetworkManager</span><span class="p">(</span><span class="n">EventEmitter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;NetworkManager class.&quot;&quot;&quot;</span>

    <span class="n">Events</span> <span class="o">=</span> <span class="n">SimpleNamespace</span><span class="p">(</span>
        <span class="n">Request</span><span class="o">=</span><span class="s1">&#39;request&#39;</span><span class="p">,</span>
        <span class="n">Response</span><span class="o">=</span><span class="s1">&#39;response&#39;</span><span class="p">,</span>
        <span class="n">RequestFailed</span><span class="o">=</span><span class="s1">&#39;requestfailed&#39;</span><span class="p">,</span>
        <span class="n">RequestFinished</span><span class="o">=</span><span class="s1">&#39;requestfinished&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">:</span> <span class="n">CDPSession</span><span class="p">,</span> <span class="n">frameManager</span><span class="p">:</span> <span class="n">FrameManager</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Make new NetworkManager.&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="n">client</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_frameManager</span> <span class="o">=</span> <span class="n">frameManager</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_requestIdToRequest</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Request</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_interceptionIdToRequest</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Request</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_extraHTTPHeaders</span><span class="p">:</span> <span class="n">OrderedDict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_offline</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_credentials</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attemptedAuthentications</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_userRequestInterceptionEnabled</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_protocolRequestInterceptionEnabled</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_requestHashToRequestIds</span> <span class="o">=</span> <span class="n">Multimap</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_requestHashToInterceptionIds</span> <span class="o">=</span> <span class="n">Multimap</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s1">&#39;Network.requestWillBeSent&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_onRequestWillBeSent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s1">&#39;Network.requestIntercepted&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_onRequestIntercepted</span><span class="p">)</span>  <span class="c1"># noqa: E501</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s1">&#39;Network.requestServedFromCache&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_onRequestServedFromCache</span><span class="p">)</span>  <span class="c1"># noqa: #501</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s1">&#39;Network.responseReceived&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_onResponseReceived</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s1">&#39;Network.loadingFinished&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_onLoadingFinished</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s1">&#39;Network.loadingFailed&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_onLoadingFailed</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">authenticate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">credentials</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Provide credentials for http auth.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_credentials</span> <span class="o">=</span> <span class="n">credentials</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_updateProtocolRequestInterception</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">setExtraHTTPHeaders</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extraHTTPHeaders</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
                                  <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Set extra http headers.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_extraHTTPHeaders</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">extraHTTPHeaders</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                    <span class="n">f</span><span class="s1">&#39;Expected value of header &quot;</span><span class="si">{k}</span><span class="s1">&quot; to be string, &#39;</span>
                    <span class="s1">&#39;but </span><span class="si">{}</span><span class="s1"> is found.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_extraHTTPHeaders</span><span class="p">[</span><span class="n">k</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span> <span class="o">=</span> <span class="n">v</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Network.setExtraHTTPHeaders&#39;</span><span class="p">,</span>
                                <span class="p">{</span><span class="s1">&#39;headers&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extraHTTPHeaders</span><span class="p">})</span>

    <span class="k">def</span> <span class="nf">extraHTTPHeaders</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get extra http headers.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_extraHTTPHeaders</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">setOfflineMode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Change offline mode enable/disable.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_offline</span> <span class="o">==</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_offline</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Network.emulateNetworkConditions&#39;</span><span class="p">,</span> <span class="p">{</span>
            <span class="s1">&#39;offline&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_offline</span><span class="p">,</span>
            <span class="s1">&#39;latency&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;downloadThroughput&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;uploadThroughput&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
        <span class="p">})</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">setUserAgent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">userAgent</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Set user agent.&quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Network.setUserAgentOverride&#39;</span><span class="p">,</span>
                                <span class="p">{</span><span class="s1">&#39;userAgent&#39;</span><span class="p">:</span> <span class="n">userAgent</span><span class="p">})</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">setRequestInterception</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Enable request intercetion.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_userRequestInterceptionEnabled</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_updateProtocolRequestInterception</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">_updateProtocolRequestInterception</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">enabled</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_userRequestInterceptionEnabled</span> <span class="ow">or</span>
                   <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_credentials</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">enabled</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_protocolRequestInterceptionEnabled</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_protocolRequestInterceptionEnabled</span> <span class="o">=</span> <span class="n">enabled</span>
        <span class="n">patterns</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;urlPattern&#39;</span><span class="p">:</span> <span class="s1">&#39;*&#39;</span><span class="p">}]</span> <span class="k">if</span> <span class="n">enabled</span> <span class="k">else</span> <span class="p">[]</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">send</span><span class="p">(</span>
                <span class="s1">&#39;Network.setCacheDisabled&#39;</span><span class="p">,</span>
                <span class="p">{</span><span class="s1">&#39;cacheDisabled&#39;</span><span class="p">:</span> <span class="n">enabled</span><span class="p">},</span>
            <span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">send</span><span class="p">(</span>
                <span class="s1">&#39;Network.setRequestInterception&#39;</span><span class="p">,</span>
                <span class="p">{</span><span class="s1">&#39;patterns&#39;</span><span class="p">:</span> <span class="n">patterns</span><span class="p">},</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_onRequestIntercepted</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># noqa: C901</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;authChallenge&#39;</span><span class="p">):</span>
            <span class="n">response</span> <span class="o">=</span> <span class="s1">&#39;Default&#39;</span>
            <span class="k">if</span> <span class="n">event</span><span class="p">[</span><span class="s1">&#39;interceptionId&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attemptedAuthentications</span><span class="p">:</span>
                <span class="n">response</span> <span class="o">=</span> <span class="s1">&#39;CancelAuth&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_credentials</span><span class="p">:</span>
                <span class="n">response</span> <span class="o">=</span> <span class="s1">&#39;ProvideCredentials&#39;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_attemptedAuthentications</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">event</span><span class="p">[</span><span class="s1">&#39;interceptionId&#39;</span><span class="p">])</span>
            <span class="n">username</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_credentials&#39;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span>
            <span class="n">password</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_credentials&#39;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">)</span>
            <span class="n">asyncio</span><span class="o">.</span><span class="n">ensure_future</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">send</span><span class="p">(</span>
                <span class="s1">&#39;Network.continueInterceptedRequest&#39;</span><span class="p">,</span> <span class="p">{</span>
                    <span class="s1">&#39;interceptionId&#39;</span><span class="p">:</span> <span class="n">event</span><span class="p">[</span><span class="s1">&#39;interceptionId&#39;</span><span class="p">],</span>
                    <span class="s1">&#39;authChallengeResponse&#39;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s1">&#39;response&#39;</span><span class="p">:</span> <span class="n">response</span><span class="p">,</span>
                        <span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="n">username</span><span class="p">,</span>
                        <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="n">password</span><span class="p">,</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">))</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_userRequestInterceptionEnabled</span> <span class="ow">and</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_protocolRequestInterceptionEnabled</span><span class="p">):</span>
            <span class="n">asyncio</span><span class="o">.</span><span class="n">ensure_future</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">send</span><span class="p">(</span>
                <span class="s1">&#39;Network.continueInterceptedRequest&#39;</span><span class="p">,</span> <span class="p">{</span>
                    <span class="s1">&#39;interceptionId&#39;</span><span class="p">:</span> <span class="n">event</span><span class="p">[</span><span class="s1">&#39;interceptionId&#39;</span><span class="p">],</span>
                <span class="p">}</span>
            <span class="p">))</span>

        <span class="k">if</span> <span class="s1">&#39;redirectURL&#39;</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>
            <span class="n">request</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_interceptionIdToRequest</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;interceptionId&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">request</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_handleRequestRedirect</span><span class="p">(</span>
                    <span class="n">request</span><span class="p">,</span>
                    <span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;redirectStatusCode&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                    <span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;redirectHeaders&#39;</span><span class="p">,</span> <span class="p">{}),</span>
                    <span class="kc">False</span><span class="p">,</span>
                    <span class="kc">False</span><span class="p">,</span>
                    <span class="kc">None</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_handleRequestStart</span><span class="p">(</span>
                    <span class="n">request</span><span class="o">.</span><span class="n">_requestId</span><span class="p">,</span>
                    <span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;interceptionId&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
                    <span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;redirectUrl&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
                    <span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;resourceType&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
                    <span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;request&#39;</span><span class="p">,</span> <span class="p">{}),</span>
                    <span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;frameId&#39;</span><span class="p">),</span>
                    <span class="n">request</span><span class="o">.</span><span class="n">_redirectChain</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">return</span>

        <span class="n">requestHash</span> <span class="o">=</span> <span class="n">generateRequestHash</span><span class="p">(</span><span class="n">event</span><span class="p">[</span><span class="s1">&#39;request&#39;</span><span class="p">])</span>
        <span class="n">requestId</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_requestHashToRequestIds</span><span class="o">.</span><span class="n">firstValue</span><span class="p">(</span><span class="n">requestHash</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">requestId</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_requestHashToRequestIds</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">requestHash</span><span class="p">,</span> <span class="n">requestId</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_handleRequestStart</span><span class="p">(</span>
                <span class="n">requestId</span><span class="p">,</span> <span class="n">event</span><span class="p">[</span><span class="s1">&#39;interceptionId&#39;</span><span class="p">],</span> <span class="n">event</span><span class="p">[</span><span class="s1">&#39;request&#39;</span><span class="p">][</span><span class="s1">&#39;url&#39;</span><span class="p">],</span>
                <span class="n">event</span><span class="p">[</span><span class="s1">&#39;resourceType&#39;</span><span class="p">],</span> <span class="n">event</span><span class="p">[</span><span class="s1">&#39;request&#39;</span><span class="p">],</span> <span class="n">event</span><span class="p">[</span><span class="s1">&#39;frameId&#39;</span><span class="p">],</span> <span class="p">[],</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_requestHashToInterceptionIds</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
                <span class="n">requestHash</span><span class="p">,</span> <span class="n">event</span><span class="p">[</span><span class="s1">&#39;interceptionId&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_handleRequestStart</span><span class="p">(</span>
                <span class="kc">None</span><span class="p">,</span> <span class="n">event</span><span class="p">[</span><span class="s1">&#39;interceptionId&#39;</span><span class="p">],</span> <span class="n">event</span><span class="p">[</span><span class="s1">&#39;request&#39;</span><span class="p">][</span><span class="s1">&#39;url&#39;</span><span class="p">],</span>
                <span class="n">event</span><span class="p">[</span><span class="s1">&#39;resourceType&#39;</span><span class="p">],</span> <span class="n">event</span><span class="p">[</span><span class="s1">&#39;request&#39;</span><span class="p">],</span> <span class="n">event</span><span class="p">[</span><span class="s1">&#39;frameId&#39;</span><span class="p">],</span> <span class="p">[],</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_onRequestServedFromCache</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">request</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_requestIdToRequest</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;requestId&#39;</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">request</span><span class="p">:</span>
            <span class="n">request</span><span class="o">.</span><span class="n">_fromMemoryCache</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_handleRequestRedirect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="s1">&#39;Request&#39;</span><span class="p">,</span> <span class="n">redirectStatus</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                               <span class="n">redirectHeaders</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">fromDiskCache</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
                               <span class="n">fromServiceWorker</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
                               <span class="n">securityDetails</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">Response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">redirectStatus</span><span class="p">,</span>
                            <span class="n">redirectHeaders</span><span class="p">,</span> <span class="n">fromDiskCache</span><span class="p">,</span> <span class="n">fromServiceWorker</span><span class="p">,</span>
                            <span class="n">securityDetails</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">_response</span> <span class="o">=</span> <span class="n">response</span>
        <span class="n">request</span><span class="o">.</span><span class="n">_redirectChain</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_requestIdToRequest</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">_requestId</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_interceptionIdToRequest</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">_interceptionId</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attemptedAuthentications</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">_interceptionId</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">NetworkManager</span><span class="o">.</span><span class="n">Events</span><span class="o">.</span><span class="n">Response</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">NetworkManager</span><span class="o">.</span><span class="n">Events</span><span class="o">.</span><span class="n">RequestFinished</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_handleRequestStart</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">requestId</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
                            <span class="n">interceptionId</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">resourceType</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                            <span class="n">requestPayload</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">frameId</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
                            <span class="n">redirectChain</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s1">&#39;Request&#39;</span><span class="p">]</span>
                            <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">frameId</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frameManager</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frameManager</span><span class="o">.</span><span class="n">frame</span><span class="p">(</span><span class="n">frameId</span><span class="p">)</span>

        <span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">,</span> <span class="n">requestId</span><span class="p">,</span> <span class="n">interceptionId</span><span class="p">,</span>
                          <span class="bp">self</span><span class="o">.</span><span class="n">_userRequestInterceptionEnabled</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span>
                          <span class="n">resourceType</span><span class="p">,</span> <span class="n">requestPayload</span><span class="p">,</span> <span class="n">frame</span><span class="p">,</span> <span class="n">redirectChain</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">requestId</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_requestIdToRequest</span><span class="p">[</span><span class="n">requestId</span><span class="p">]</span> <span class="o">=</span> <span class="n">request</span>
        <span class="k">if</span> <span class="n">interceptionId</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_interceptionIdToRequest</span><span class="p">[</span><span class="n">interceptionId</span><span class="p">]</span> <span class="o">=</span> <span class="n">request</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">NetworkManager</span><span class="o">.</span><span class="n">Events</span><span class="o">.</span><span class="n">Request</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_onRequestWillBeSent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_protocolRequestInterceptionEnabled</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;redirectResponse&#39;</span><span class="p">):</span>
                <span class="k">return</span>
            <span class="n">requestHash</span> <span class="o">=</span> <span class="n">generateRequestHash</span><span class="p">(</span><span class="n">event</span><span class="p">[</span><span class="s1">&#39;request&#39;</span><span class="p">])</span>
            <span class="n">interceptionId</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_requestHashToInterceptionIds</span><span class="o">.</span><span class="n">firstValue</span><span class="p">(</span>
                <span class="n">requestHash</span><span class="p">)</span>
            <span class="n">request</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_interceptionIdToRequest</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">interceptionId</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">request</span><span class="p">:</span>
                <span class="n">request</span><span class="o">.</span><span class="n">_requestId</span> <span class="o">=</span> <span class="n">event</span><span class="p">[</span><span class="s1">&#39;requestId&#39;</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_requestIdToRequest</span><span class="p">[</span><span class="n">event</span><span class="p">[</span><span class="s1">&#39;requestId&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">request</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_requestHashToInterceptionIds</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
                    <span class="n">requestHash</span><span class="p">,</span> <span class="n">interceptionId</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_requestHashToRequestIds</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
                    <span class="n">requestHash</span><span class="p">,</span> <span class="n">event</span><span class="p">[</span><span class="s1">&#39;requestId&#39;</span><span class="p">])</span>
            <span class="k">return</span>

        <span class="n">redirectChain</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Request</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;redirectResponse&#39;</span><span class="p">):</span>
            <span class="n">request</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_requestIdToRequest</span><span class="p">[</span><span class="n">event</span><span class="p">[</span><span class="s1">&#39;requestId&#39;</span><span class="p">]]</span>
            <span class="k">if</span> <span class="n">request</span><span class="p">:</span>
                <span class="n">redirectResponse</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;redirectResponse&#39;</span><span class="p">,</span> <span class="p">{})</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_handleRequestRedirect</span><span class="p">(</span>
                    <span class="n">request</span><span class="p">,</span>
                    <span class="n">redirectResponse</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;status&#39;</span><span class="p">),</span>
                    <span class="n">redirectResponse</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;headers&#39;</span><span class="p">),</span>
                    <span class="n">redirectResponse</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fromDiskCache&#39;</span><span class="p">),</span>
                    <span class="n">redirectResponse</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fromServiceWorker&#39;</span><span class="p">),</span>
                    <span class="n">redirectResponse</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;securityDetails&#39;</span><span class="p">),</span>
                <span class="p">)</span>
                <span class="n">redirectChain</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">_redirectChain</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handleRequestStart</span><span class="p">(</span>
            <span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;requestId&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;request&#39;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
            <span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
            <span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;request&#39;</span><span class="p">,</span> <span class="p">{}),</span>
            <span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;frameId&#39;</span><span class="p">),</span>
            <span class="n">redirectChain</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_onResponseReceived</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">request</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_requestIdToRequest</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event</span><span class="p">[</span><span class="s1">&#39;requestId&#39;</span><span class="p">])</span>
        <span class="c1"># FileUpload sends a response without a matching request.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">request</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">_resp</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;response&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">Response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span>
                            <span class="n">_resp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;status&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                            <span class="n">_resp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;headers&#39;</span><span class="p">,</span> <span class="p">{}),</span>
                            <span class="n">_resp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fromDiskCache&#39;</span><span class="p">),</span>
                            <span class="n">_resp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fromServiceWorker&#39;</span><span class="p">),</span>
                            <span class="n">_resp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;securityDetails&#39;</span><span class="p">))</span>
        <span class="n">request</span><span class="o">.</span><span class="n">_response</span> <span class="o">=</span> <span class="n">response</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">NetworkManager</span><span class="o">.</span><span class="n">Events</span><span class="o">.</span><span class="n">Response</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_onLoadingFinished</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">request</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_requestIdToRequest</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;requestId&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
        <span class="c1"># For certain requestIds we never receive requestWillBeSent event.</span>
        <span class="c1"># @see https://crbug.com/750469</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">request</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">request</span><span class="o">.</span><span class="n">_completePromiseFulfill</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_requestIdToRequest</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">_requestId</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_interceptionIdToRequest</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">_interceptionId</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attemptedAuthentications</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">_interceptionId</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">NetworkManager</span><span class="o">.</span><span class="n">Events</span><span class="o">.</span><span class="n">RequestFinished</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_onLoadingFailed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">request</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_requestIdToRequest</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event</span><span class="p">[</span><span class="s1">&#39;requestId&#39;</span><span class="p">])</span>
        <span class="c1"># For certain requestIds we never receive requestWillBeSent event.</span>
        <span class="c1"># @see https://crbug.com/750469</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">request</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">request</span><span class="o">.</span><span class="n">_failureText</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;errorText&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">_completePromiseFulfill</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_requestIdToRequest</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">_requestId</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_interceptionIdToRequest</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">_interceptionId</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attemptedAuthentications</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">_interceptionId</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">NetworkManager</span><span class="o">.</span><span class="n">Events</span><span class="o">.</span><span class="n">RequestFailed</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>


<div class="viewcode-block" id="Request"><a class="viewcode-back" href="../../reference.html#pyppeteer.network_manager.Request">[docs]</a><span class="k">class</span> <span class="nc">Request</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Request class.&quot;&quot;&quot;</span>

    <span class="c1">#: url of this request.</span>
    <span class="n">url</span><span class="p">:</span> <span class="nb">str</span>
    <span class="c1">#: headers associated with the request.</span>
    <span class="n">headers</span><span class="p">:</span> <span class="nb">dict</span>
    <span class="c1">#: contains the request method (GET/POST/...).</span>
    <span class="n">method</span><span class="p">:</span> <span class="nb">str</span>
    <span class="c1">#: contains the request&#39;s post body, if any.</span>
    <span class="n">postData</span><span class="p">:</span> <span class="nb">str</span>
    <span class="c1">#: contains the request&#39;s resource type</span>
    <span class="n">resourceType</span><span class="p">:</span> <span class="nb">str</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">:</span> <span class="n">CDPSession</span><span class="p">,</span> <span class="n">requestId</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
                 <span class="n">interceptionId</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">allowInterception</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                 <span class="n">resourceType</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">payload</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">frame</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Frame</span><span class="p">],</span>
                 <span class="n">redirectChain</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s1">&#39;Request&#39;</span><span class="p">]</span>
                 <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="n">client</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_requestId</span> <span class="o">=</span> <span class="n">requestId</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_interceptionId</span> <span class="o">=</span> <span class="n">interceptionId</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_allowInterception</span> <span class="o">=</span> <span class="n">allowInterception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_interceptionHandled</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_response</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Response</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_failureText</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_completePromise</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">create_future</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">=</span> <span class="n">url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_resourceType</span> <span class="o">=</span> <span class="n">resourceType</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_method</span> <span class="o">=</span> <span class="n">payload</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;method&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_postData</span> <span class="o">=</span> <span class="n">payload</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;postData&#39;</span><span class="p">)</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="n">payload</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;headers&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">headers</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_frame</span> <span class="o">=</span> <span class="n">frame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_redirectChain</span> <span class="o">=</span> <span class="n">redirectChain</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_fromMemoryCache</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">_completePromiseFulfill</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_completePromise</span><span class="o">.</span><span class="n">set_result</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;URL of this request.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">resourceType</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Resource type of this request perceived by the rendering engine.</span>

<span class="sd">        ResourceType will be one of the following: ``document``,</span>
<span class="sd">        ``stylesheet``, ``image``, ``media``, ``font``, ``script``,</span>
<span class="sd">        ``texttrack``, ``xhr``, ``fetch``, ``eventsource``, ``websocket``,</span>
<span class="sd">        ``manifest``, ``other``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resourceType</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">method</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return this request&#39;s method (GET, POST, etc.).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_method</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">postData</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return post body of this request.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_postData</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">headers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Reurn a dictionary of HTTP headers of this request.</span>

<span class="sd">        All header names are lower-case.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">response</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="s1">&#39;Response&#39;</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return matching :class:`Response` object, or ``None``.</span>

<span class="sd">        If the response has not been recieved, return ``None``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_response</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">frame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Frame</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return a matching :class:`~pyppeteer.frame_manager.frame` object.</span>

<span class="sd">        Return ``None`` if navigating to error page.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frame</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">redirectChain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="s1">&#39;Request&#39;</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return chain of requests initiated to fetch a resource.</span>

<span class="sd">        * If there are no redirects and request was successfull, the chain will</span>
<span class="sd">          be empty.</span>
<span class="sd">        * If a server responds with at least a single redirect, then the chain</span>
<span class="sd">          will contain all the requests that were redirected.</span>

<span class="sd">        ``redirectChain`` is shared between all the requests of the same chain.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_redirectChain</span><span class="p">)</span>

<div class="viewcode-block" id="Request.failure"><a class="viewcode-back" href="../../reference.html#pyppeteer.network_manager.Request.failure">[docs]</a>    <span class="k">def</span> <span class="nf">failure</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return error text.</span>

<span class="sd">        Return ``None`` unless this request was failed, as reported by</span>
<span class="sd">        ``requestfailed`` event.</span>

<span class="sd">        When request failed, this method return dictionary which has a</span>
<span class="sd">        ``errorText`` field, which contains human-readable error message, e.g.</span>
<span class="sd">        ``&#39;net::ERR_RAILED&#39;``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_failureText</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;errorText&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_failureText</span><span class="p">}</span></div>

<div class="viewcode-block" id="Request.continue_"><a class="viewcode-back" href="../../reference.html#pyppeteer.network_manager.Request.continue_">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">continue_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">overrides</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Continue request with optional request overrides.</span>

<span class="sd">        To use this method, request interception should be enabled by</span>
<span class="sd">        :meth:`pyppeteer.page.Page.setRequestInterception`. If request</span>
<span class="sd">        interception is not enabled, raise ``NetworkError``.</span>

<span class="sd">        ``overrides`` can have the following fields:</span>

<span class="sd">        * ``url`` (str): If set, the request url will be changed.</span>
<span class="sd">        * ``method`` (str): If set, change the request method (e.g. ``GET``).</span>
<span class="sd">        * ``postData`` (str): If set, change the post data or request.</span>
<span class="sd">        * ``headers`` (dict): If set, change the request HTTP header.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">overrides</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">overrides</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_allowInterception</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NetworkError</span><span class="p">(</span><span class="s1">&#39;Request interception is not enabled.&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_interceptionHandled</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NetworkError</span><span class="p">(</span><span class="s1">&#39;Request is already handled.&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_interceptionHandled</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">opt</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;interceptionId&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_interceptionId</span><span class="p">}</span>
        <span class="n">opt</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">overrides</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Network.continueInterceptedRequest&#39;</span><span class="p">,</span> <span class="n">opt</span><span class="p">)</span></div>

<div class="viewcode-block" id="Request.respond"><a class="viewcode-back" href="../../reference.html#pyppeteer.network_manager.Request.respond">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">respond</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># noqa: C901</span>
        <span class="sd">&quot;&quot;&quot;Fulfills request with given response.</span>

<span class="sd">        To use this, request interception shuold by enabled by</span>
<span class="sd">        :meth:`pyppeteer.page.Page.setRequestInterception`. Request</span>
<span class="sd">        interception is not enabled, raise ``NetworkError``.</span>

<span class="sd">        ``response`` is a dictinary which can have the following fields:</span>

<span class="sd">        * ``status`` (int): Response status code, defaults to 200.</span>
<span class="sd">        * ``headers`` (dict): Optional response headers.</span>
<span class="sd">        * ``contentType`` (str): If set, euqals to setting ``Content-Type``</span>
<span class="sd">          response header.</span>
<span class="sd">        * ``body`` (str|bytes): Optional response body.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;data:&#39;</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_allowInterception</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NetworkError</span><span class="p">(</span><span class="s1">&#39;Request interception is not enabled.&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_interceptionHandled</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NetworkError</span><span class="p">(</span><span class="s1">&#39;Request is already handled.&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_interceptionHandled</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s1">&#39;body&#39;</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">responseBody</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;body&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">responseBody</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)</span>

        <span class="n">responseHeaders</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;headers&#39;</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">header</span> <span class="ow">in</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;headers&#39;</span><span class="p">]:</span>
                <span class="n">responseHeaders</span><span class="p">[</span><span class="n">header</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;headers&#39;</span><span class="p">][</span><span class="n">header</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;contentType&#39;</span><span class="p">):</span>
            <span class="n">responseHeaders</span><span class="p">[</span><span class="s1">&#39;content-type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;contentType&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">responseBody</span> <span class="ow">and</span> <span class="s1">&#39;content-length&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">responseHeaders</span><span class="p">:</span>
            <span class="n">responseHeaders</span><span class="p">[</span><span class="s1">&#39;content-length&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">responseBody</span><span class="p">)</span>

        <span class="n">statusCode</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;status&#39;</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
        <span class="n">statusText</span> <span class="o">=</span> <span class="n">statusTexts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">statusCode</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">statusLine</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;HTTP/1.1 </span><span class="si">{statusCode}</span><span class="s1"> </span><span class="si">{statusText}</span><span class="s1">&#39;</span>

        <span class="n">CRLF</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\r\n</span><span class="s1">&#39;</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">statusLine</span> <span class="o">+</span> <span class="n">CRLF</span>
        <span class="k">for</span> <span class="n">header</span> <span class="ow">in</span> <span class="n">responseHeaders</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;</span><span class="si">{text}{header}</span><span class="s1">: </span><span class="si">{responseHeaders[header]}{CRLF}</span><span class="s1">&#39;</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span> <span class="o">+</span> <span class="n">CRLF</span>
        <span class="n">responseBuffer</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">responseBody</span><span class="p">:</span>
            <span class="n">responseBuffer</span> <span class="o">=</span> <span class="n">responseBuffer</span> <span class="o">+</span> <span class="n">responseBody</span>

        <span class="n">rawResponse</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">responseBuffer</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Network.continueInterceptedRequest&#39;</span><span class="p">,</span> <span class="p">{</span>
            <span class="s1">&#39;interceptionId&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_interceptionId</span><span class="p">,</span>
            <span class="s1">&#39;rawResponse&#39;</span><span class="p">:</span> <span class="n">rawResponse</span><span class="p">,</span>
        <span class="p">})</span></div>

<div class="viewcode-block" id="Request.abort"><a class="viewcode-back" href="../../reference.html#pyppeteer.network_manager.Request.abort">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">abort</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">errorCode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;failed&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Abort request.</span>

<span class="sd">        To use this, request interception should be enabled by</span>
<span class="sd">        :meth:`pyppeteer.page.Page.setRequestInterception`.</span>
<span class="sd">        If request interception is not enabled, raise ``NetworkError``.</span>

<span class="sd">        ``errorCode`` is an optional error code string. Defaults to ``failed``,</span>
<span class="sd">        could be one of the following: ``aborted``, ``accesdenied``,</span>
<span class="sd">        ``addressunreachable``, ``connectionaborted``, ``connectionclosed``,</span>
<span class="sd">        ``connectionfailed``, ``connnectionrefused``, ``connectionreset``,</span>
<span class="sd">        ``internetdisconnected``, ``namenotresolved``, ``timedout``, ``failed``</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">errorReason</span> <span class="o">=</span> <span class="n">errorReasons</span><span class="p">[</span><span class="n">errorCode</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">errorReason</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NetworkError</span><span class="p">(</span><span class="s1">&#39;Unknown error code: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">errorCode</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_allowInterception</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NetworkError</span><span class="p">(</span><span class="s1">&#39;Request interception is not enabled.&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_interceptionHandled</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NetworkError</span><span class="p">(</span><span class="s1">&#39;Request is already handled.&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_interceptionHandled</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Network.continueInterceptedRequest&#39;</span><span class="p">,</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="n">interceptionId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_interceptionId</span><span class="p">,</span>
            <span class="n">errorReason</span><span class="o">=</span><span class="n">errorReason</span><span class="p">,</span>
        <span class="p">))</span></div></div>


<span class="n">errorReasons</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;aborted&#39;</span><span class="p">:</span> <span class="s1">&#39;Aborted&#39;</span><span class="p">,</span>
    <span class="s1">&#39;accessdenied&#39;</span><span class="p">:</span> <span class="s1">&#39;AccessDenied&#39;</span><span class="p">,</span>
    <span class="s1">&#39;addressunreachable&#39;</span><span class="p">:</span> <span class="s1">&#39;AddressUnreachable&#39;</span><span class="p">,</span>
    <span class="s1">&#39;connectionaborted&#39;</span><span class="p">:</span> <span class="s1">&#39;ConnectionAborted&#39;</span><span class="p">,</span>
    <span class="s1">&#39;connectionclosed&#39;</span><span class="p">:</span> <span class="s1">&#39;ConnectionClosed&#39;</span><span class="p">,</span>
    <span class="s1">&#39;connectionfailed&#39;</span><span class="p">:</span> <span class="s1">&#39;ConnectionFailed&#39;</span><span class="p">,</span>
    <span class="s1">&#39;connectionrefused&#39;</span><span class="p">:</span> <span class="s1">&#39;ConnectionRefused&#39;</span><span class="p">,</span>
    <span class="s1">&#39;connectionreset&#39;</span><span class="p">:</span> <span class="s1">&#39;ConnectionReset&#39;</span><span class="p">,</span>
    <span class="s1">&#39;internetdisconnected&#39;</span><span class="p">:</span> <span class="s1">&#39;InternetDisconnected&#39;</span><span class="p">,</span>
    <span class="s1">&#39;namenotresolved&#39;</span><span class="p">:</span> <span class="s1">&#39;NameNotResolved&#39;</span><span class="p">,</span>
    <span class="s1">&#39;timedout&#39;</span><span class="p">:</span> <span class="s1">&#39;TimedOut&#39;</span><span class="p">,</span>
    <span class="s1">&#39;failed&#39;</span><span class="p">:</span> <span class="s1">&#39;Failed&#39;</span><span class="p">,</span>
<span class="p">}</span>


<div class="viewcode-block" id="Response"><a class="viewcode-back" href="../../reference.html#pyppeteer.network_manager.Response">[docs]</a><span class="k">class</span> <span class="nc">Response</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Response class represents responses which are recieved by ``Page``.&quot;&quot;&quot;</span>

    <span class="c1">#: whether the repoonse succeeded or not.</span>
    <span class="n">ok</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="c1">#: status code of the reponse.</span>
    <span class="n">status</span><span class="p">:</span> <span class="nb">int</span>
    <span class="c1">#: url of the reponse.</span>
    <span class="n">url</span><span class="p">:</span> <span class="nb">str</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">:</span> <span class="n">CDPSession</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">status</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                 <span class="n">headers</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">fromDiskCache</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
                 <span class="n">fromServiceWorker</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">securityDetails</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="kc">None</span>
                 <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="n">client</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="n">request</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">status</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_contentPromise</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">create_future</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fromDiskCache</span> <span class="o">=</span> <span class="n">fromDiskCache</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fromServiceWorker</span> <span class="o">=</span> <span class="n">fromServiceWorker</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">headers</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_securityDetails</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">,</span> <span class="n">SecurityDetails</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">securityDetails</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_securityDetails</span> <span class="o">=</span> <span class="n">SecurityDetails</span><span class="p">(</span>
                <span class="n">securityDetails</span><span class="p">[</span><span class="s1">&#39;subjectName&#39;</span><span class="p">],</span>
                <span class="n">securityDetails</span><span class="p">[</span><span class="s1">&#39;issuer&#39;</span><span class="p">],</span>
                <span class="n">securityDetails</span><span class="p">[</span><span class="s1">&#39;validFrom&#39;</span><span class="p">],</span>
                <span class="n">securityDetails</span><span class="p">[</span><span class="s1">&#39;validTo&#39;</span><span class="p">],</span>
                <span class="n">securityDetails</span><span class="p">[</span><span class="s1">&#39;protocol&#39;</span><span class="p">],</span>
            <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;URL of the response.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ok</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return bool whether this request is successfull (200-299) or not.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="mi">200</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">&lt;=</span> <span class="mi">299</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Status code of the response.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">headers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return dictionary of HTTP headers of this response.</span>

<span class="sd">        All header names are lower-case.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">securityDetails</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">,</span> <span class="s1">&#39;SecurityDetails&#39;</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return security details associated with this response.</span>

<span class="sd">        Security details if the response was received over the secure</span>
<span class="sd">        connection, or `None` otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_securityDetails</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">_bufread</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Network.getResponseBody&#39;</span><span class="p">,</span> <span class="p">{</span>
            <span class="s1">&#39;requestId&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="o">.</span><span class="n">_requestId</span>
        <span class="p">})</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;base64Encoded&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">body</span>

<div class="viewcode-block" id="Response.buffer"><a class="viewcode-back" href="../../reference.html#pyppeteer.network_manager.Response.buffer">[docs]</a>    <span class="k">def</span> <span class="nf">buffer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Awaitable</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Retrun awaitable which resolves to bytes with response body.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_contentPromise</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">ensure_future</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_bufread</span><span class="p">())</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_contentPromise</span></div>

<div class="viewcode-block" id="Response.text"><a class="viewcode-back" href="../../reference.html#pyppeteer.network_manager.Response.text">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">text</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get text representation of response body.&quot;&quot;&quot;</span>
        <span class="n">content</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">content</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Response.json"><a class="viewcode-back" href="../../reference.html#pyppeteer.network_manager.Response.json">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">json</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get JSON representation of response body.&quot;&quot;&quot;</span>
        <span class="n">content</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">content</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">request</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Request</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get matching :class:`Request` object.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">fromCache</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return ``True`` if the response was served from cache.</span>

<span class="sd">        Here `cache` is either the browser&#39;s disk cache or memory cache.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fromDiskCache</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="o">.</span><span class="n">_fromMemoryCache</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">fromServiceWorker</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return ``True`` if the response was served by a service worker.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fromServiceWorker</span></div>


<span class="k">def</span> <span class="nf">generateRequestHash</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Generate request hash.&quot;&quot;&quot;</span>
    <span class="n">normalizedURL</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">normalizedURL</span> <span class="o">=</span> <span class="n">unquote</span><span class="p">(</span><span class="n">normalizedURL</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="n">_hash</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="n">normalizedURL</span><span class="p">,</span>
        <span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;method&#39;</span><span class="p">),</span>
        <span class="s1">&#39;postData&#39;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;postData&#39;</span><span class="p">),</span>
        <span class="s1">&#39;headers&#39;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">normalizedURL</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;data:&#39;</span><span class="p">):</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">request</span><span class="p">[</span><span class="s1">&#39;headers&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">header</span> <span class="ow">in</span> <span class="n">headers</span><span class="p">:</span>
            <span class="n">headerValue</span> <span class="o">=</span> <span class="n">request</span><span class="p">[</span><span class="s1">&#39;headers&#39;</span><span class="p">][</span><span class="n">header</span><span class="p">]</span>
            <span class="n">header</span> <span class="o">=</span> <span class="n">header</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">header</span> <span class="o">==</span> <span class="s1">&#39;accept&#39;</span> <span class="ow">or</span> <span class="n">header</span> <span class="o">==</span> <span class="s1">&#39;referer&#39;</span> <span class="ow">or</span> <span class="n">header</span> <span class="o">==</span> <span class="s1">&#39;x-devtools-emulate-network-conditions-client-id&#39;</span><span class="p">):</span>  <span class="c1"># noqa: E501</span>
                <span class="k">continue</span>
            <span class="n">_hash</span><span class="p">[</span><span class="s1">&#39;headers&#39;</span><span class="p">][</span><span class="n">header</span><span class="p">]</span> <span class="o">=</span> <span class="n">headerValue</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">_hash</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">SecurityDetails</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class represents responses which are received by page.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subjectName</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">issuer</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">validFrom</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                 <span class="n">validTo</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">protocol</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_subjectName</span> <span class="o">=</span> <span class="n">subjectName</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_issuer</span> <span class="o">=</span> <span class="n">issuer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validFrom</span> <span class="o">=</span> <span class="n">validFrom</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validTo</span> <span class="o">=</span> <span class="n">validTo</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_protocol</span> <span class="o">=</span> <span class="n">protocol</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">subjectName</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return the subject to which the certificate was issued to.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subjectName</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">issuer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return a string with the name of issuer of the certificate.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_issuer</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">validFrom</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return UnixTime of the start of validity of the certificate.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validFrom</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">validTo</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return UnixTime of the end of validity of the certificate.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validTo</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">protocol</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return string of with the security protocol, e.g. &quot;TLS1.2&quot;.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_protocol</span>


<span class="n">statusTexts</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;100&#39;</span><span class="p">:</span> <span class="s1">&#39;Continue&#39;</span><span class="p">,</span>
    <span class="s1">&#39;101&#39;</span><span class="p">:</span> <span class="s1">&#39;Switching Protocols&#39;</span><span class="p">,</span>
    <span class="s1">&#39;102&#39;</span><span class="p">:</span> <span class="s1">&#39;Processing&#39;</span><span class="p">,</span>
    <span class="s1">&#39;200&#39;</span><span class="p">:</span> <span class="s1">&#39;OK&#39;</span><span class="p">,</span>
    <span class="s1">&#39;201&#39;</span><span class="p">:</span> <span class="s1">&#39;Created&#39;</span><span class="p">,</span>
    <span class="s1">&#39;202&#39;</span><span class="p">:</span> <span class="s1">&#39;Accepted&#39;</span><span class="p">,</span>
    <span class="s1">&#39;203&#39;</span><span class="p">:</span> <span class="s1">&#39;Non-Authoritative Information&#39;</span><span class="p">,</span>
    <span class="s1">&#39;204&#39;</span><span class="p">:</span> <span class="s1">&#39;No Content&#39;</span><span class="p">,</span>
    <span class="s1">&#39;206&#39;</span><span class="p">:</span> <span class="s1">&#39;Partial Content&#39;</span><span class="p">,</span>
    <span class="s1">&#39;207&#39;</span><span class="p">:</span> <span class="s1">&#39;Multi-Status&#39;</span><span class="p">,</span>
    <span class="s1">&#39;208&#39;</span><span class="p">:</span> <span class="s1">&#39;Already Reported&#39;</span><span class="p">,</span>
    <span class="s1">&#39;209&#39;</span><span class="p">:</span> <span class="s1">&#39;IM Used&#39;</span><span class="p">,</span>
    <span class="s1">&#39;300&#39;</span><span class="p">:</span> <span class="s1">&#39;Multiple Choices&#39;</span><span class="p">,</span>
    <span class="s1">&#39;301&#39;</span><span class="p">:</span> <span class="s1">&#39;Moved Permanently&#39;</span><span class="p">,</span>
    <span class="s1">&#39;302&#39;</span><span class="p">:</span> <span class="s1">&#39;Found&#39;</span><span class="p">,</span>
    <span class="s1">&#39;303&#39;</span><span class="p">:</span> <span class="s1">&#39;See Other&#39;</span><span class="p">,</span>
    <span class="s1">&#39;304&#39;</span><span class="p">:</span> <span class="s1">&#39;Not Modified&#39;</span><span class="p">,</span>
    <span class="s1">&#39;305&#39;</span><span class="p">:</span> <span class="s1">&#39;Use Proxy&#39;</span><span class="p">,</span>
    <span class="s1">&#39;306&#39;</span><span class="p">:</span> <span class="s1">&#39;Switch Proxy&#39;</span><span class="p">,</span>
    <span class="s1">&#39;307&#39;</span><span class="p">:</span> <span class="s1">&#39;Temporary Redirect&#39;</span><span class="p">,</span>
    <span class="s1">&#39;308&#39;</span><span class="p">:</span> <span class="s1">&#39;Permanent Redirect&#39;</span><span class="p">,</span>
    <span class="s1">&#39;400&#39;</span><span class="p">:</span> <span class="s1">&#39;Bad Request&#39;</span><span class="p">,</span>
    <span class="s1">&#39;401&#39;</span><span class="p">:</span> <span class="s1">&#39;Unauthorized&#39;</span><span class="p">,</span>
    <span class="s1">&#39;402&#39;</span><span class="p">:</span> <span class="s1">&#39;Payment Required&#39;</span><span class="p">,</span>
    <span class="s1">&#39;403&#39;</span><span class="p">:</span> <span class="s1">&#39;Forbidden&#39;</span><span class="p">,</span>
    <span class="s1">&#39;404&#39;</span><span class="p">:</span> <span class="s1">&#39;Not Found&#39;</span><span class="p">,</span>
    <span class="s1">&#39;405&#39;</span><span class="p">:</span> <span class="s1">&#39;Method Not Allowed&#39;</span><span class="p">,</span>
    <span class="s1">&#39;406&#39;</span><span class="p">:</span> <span class="s1">&#39;Not Acceptable&#39;</span><span class="p">,</span>
    <span class="s1">&#39;407&#39;</span><span class="p">:</span> <span class="s1">&#39;Proxy Authentication Required&#39;</span><span class="p">,</span>
    <span class="s1">&#39;408&#39;</span><span class="p">:</span> <span class="s1">&#39;Request Timeout&#39;</span><span class="p">,</span>
    <span class="s1">&#39;409&#39;</span><span class="p">:</span> <span class="s1">&#39;Conflict&#39;</span><span class="p">,</span>
    <span class="s1">&#39;410&#39;</span><span class="p">:</span> <span class="s1">&#39;Gone&#39;</span><span class="p">,</span>
    <span class="s1">&#39;411&#39;</span><span class="p">:</span> <span class="s1">&#39;Length Required&#39;</span><span class="p">,</span>
    <span class="s1">&#39;412&#39;</span><span class="p">:</span> <span class="s1">&#39;Precondition Failed&#39;</span><span class="p">,</span>
    <span class="s1">&#39;413&#39;</span><span class="p">:</span> <span class="s1">&#39;Payload Too Large&#39;</span><span class="p">,</span>
    <span class="s1">&#39;414&#39;</span><span class="p">:</span> <span class="s1">&#39;URI Too Long&#39;</span><span class="p">,</span>
    <span class="s1">&#39;415&#39;</span><span class="p">:</span> <span class="s1">&#39;Unsupported Media Type&#39;</span><span class="p">,</span>
    <span class="s1">&#39;416&#39;</span><span class="p">:</span> <span class="s1">&#39;Range Not Satisfiable&#39;</span><span class="p">,</span>
    <span class="s1">&#39;417&#39;</span><span class="p">:</span> <span class="s1">&#39;Expectation Failed&#39;</span><span class="p">,</span>
    <span class="s1">&#39;418&#39;</span><span class="p">:</span> <span class="s1">&#39;I</span><span class="se">\&#39;</span><span class="s1">m a teapot&#39;</span><span class="p">,</span>
    <span class="s1">&#39;421&#39;</span><span class="p">:</span> <span class="s1">&#39;Misdirected Request&#39;</span><span class="p">,</span>
    <span class="s1">&#39;422&#39;</span><span class="p">:</span> <span class="s1">&#39;Unprocessable Entity&#39;</span><span class="p">,</span>
    <span class="s1">&#39;423&#39;</span><span class="p">:</span> <span class="s1">&#39;Locked&#39;</span><span class="p">,</span>
    <span class="s1">&#39;424&#39;</span><span class="p">:</span> <span class="s1">&#39;Failed Dependency&#39;</span><span class="p">,</span>
    <span class="s1">&#39;426&#39;</span><span class="p">:</span> <span class="s1">&#39;Upgrade Required&#39;</span><span class="p">,</span>
    <span class="s1">&#39;428&#39;</span><span class="p">:</span> <span class="s1">&#39;Precondition Required&#39;</span><span class="p">,</span>
    <span class="s1">&#39;429&#39;</span><span class="p">:</span> <span class="s1">&#39;Too Many Requests&#39;</span><span class="p">,</span>
    <span class="s1">&#39;431&#39;</span><span class="p">:</span> <span class="s1">&#39;Request Header Fields Too Large&#39;</span><span class="p">,</span>
    <span class="s1">&#39;451&#39;</span><span class="p">:</span> <span class="s1">&#39;Unavailable For Legal Reasons&#39;</span><span class="p">,</span>
    <span class="s1">&#39;500&#39;</span><span class="p">:</span> <span class="s1">&#39;Internal Server Error&#39;</span><span class="p">,</span>
    <span class="s1">&#39;501&#39;</span><span class="p">:</span> <span class="s1">&#39;Not Implemented&#39;</span><span class="p">,</span>
    <span class="s1">&#39;502&#39;</span><span class="p">:</span> <span class="s1">&#39;Bad Gateway&#39;</span><span class="p">,</span>
    <span class="s1">&#39;503&#39;</span><span class="p">:</span> <span class="s1">&#39;Service Unavailable&#39;</span><span class="p">,</span>
    <span class="s1">&#39;504&#39;</span><span class="p">:</span> <span class="s1">&#39;Gateway Timeout&#39;</span><span class="p">,</span>
    <span class="s1">&#39;505&#39;</span><span class="p">:</span> <span class="s1">&#39;HTTP Version Not Supported&#39;</span><span class="p">,</span>
    <span class="s1">&#39;506&#39;</span><span class="p">:</span> <span class="s1">&#39;Variant Also Negotiates&#39;</span><span class="p">,</span>
    <span class="s1">&#39;507&#39;</span><span class="p">:</span> <span class="s1">&#39;Insufficient Storage&#39;</span><span class="p">,</span>
    <span class="s1">&#39;508&#39;</span><span class="p">:</span> <span class="s1">&#39;Loop Detected&#39;</span><span class="p">,</span>
    <span class="s1">&#39;510&#39;</span><span class="p">:</span> <span class="s1">&#39;Not Extended&#39;</span><span class="p">,</span>
    <span class="s1">&#39;511&#39;</span><span class="p">:</span> <span class="s1">&#39;Network Authentication Required&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">Pyppeteer</a></h1>



<p class="blurb">Headless chrome/chromium automation library (unofficial port of puppeteer)</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=miyakogi&repo=pyppeteer&type=mark&count=False&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../reference.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changes.html">History</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Hiroyuki Takagi.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
    </div>

    
    <a href="https://github.com/miyakogi/pyppeteer" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>